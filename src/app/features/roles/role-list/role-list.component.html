<div class="role-list-container">
  <div class="card border-0 shadow-sm">
    <div class="card-header bg-white border-bottom py-3">
      <div class="d-flex justify-content-between align-items-center">
        <h4 class="card-title mb-0 text-primary">
          <i class="bi bi-person-badge me-2"></i>Role Management
        </h4>
        <button class="btn btn-primary" (click)="openRoleForm()">
          <i class="bi bi-person-badge-plus me-1"></i>Add Role
        </button>
      </div>
    </div>

    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-hover table-striped mb-0">
          <thead class="table-light">
            <tr>
              <th scope="col" class="ps-4">Name</th>
              <th scope="col">Permissions</th>
              <th scope="col" class="text-center pe-4">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let role of dataSource.data">
              <td class="ps-4">
                <div class="d-flex align-items-center">
                  <span class="fw-medium">{{ role.name }}</span>
                  <span *ngIf="role.isDefault" class="badge bg-success ms-2">
                    <i class="bi bi-shield-check me-1"></i>Default
                  </span>
                </div>
              </td>
              <td>
                <div class="d-flex flex-wrap gap-1">
                  <span
                    *ngFor="let permission of role.permissions.slice(0, 3)"
                    class="badge bg-primary bg-opacity-10 text-primary border border-primary border-opacity-25"
                  >
                    {{ permission }}
                  </span>
                  <span
                    *ngIf="role.permissions.length > 3"
                    class="badge bg-secondary bg-opacity-10 text-secondary"
                  >
                    +{{ role.permissions.length - 3 }} more
                  </span>
                  <span
                    *ngIf="role.permissions.length === 0"
                    class="badge bg-light text-muted"
                  >
                    No permissions
                  </span>
                </div>
              </td>
              <td class="text-center pe-4">
                <div class="btn-group" role="group">
                  <button
                    class="btn btn-outline-primary btn-sm"
                    (click)="openRoleForm(role)"
                    [disabled]="role.isDefault"
                    [title]="
                      role.isDefault
                        ? 'Cannot edit default role'
                        : 'Edit ' + role.name
                    "
                  >
                    <i class="bi bi-pencil-square"></i>
                  </button>
                  <button
                    class="btn btn-outline-danger btn-sm"
                    (click)="deleteRole(role)"
                    [disabled]="role.isDefault"
                    [title]="
                      role.isDefault
                        ? 'Cannot delete default role'
                        : 'Delete ' + role.name
                    "
                  >
                    <i class="bi bi-trash"></i>
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Empty State -->
      <div *ngIf="dataSource.data.length === 0" class="text-center py-5">
        <i class="bi bi-person-badge display-4 text-muted"></i>
        <h5 class="text-muted mt-3">No Roles Found</h5>
        <p class="text-muted">Get started by creating your first role.</p>
        <button class="btn btn-primary" (click)="openRoleForm()">
          <i class="bi bi-person-badge-plus me-1"></i>Add Role
        </button>
      </div>
    </div>
  </div>
</div>
